<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pfSense Router - Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        .header {
            background: #1a73e8;
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .header .logo {
            background: white;
            color: #1a73e8;
            padding: 0.5rem;
            border-radius: 4px;
            margin-right: 1rem;
            font-weight: bold;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .card {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            color: #1a73e8;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-value {
            font-weight: bold;
        }
        
        .status-online {
            color: #28a745;
        }
        
        .status-offline {
            color: #dc3545;
        }
        
        .network-segment {
            background: #f8f9fa;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 4px;
            border-left: 4px solid #1a73e8;
        }
        
        .network-segment h3 {
            color: #1a73e8;
            margin-bottom: 0.5rem;
        }
        
        .btn {
            background: #1a73e8;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }
        
        .btn:hover {
            background: #1557b7;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #545b62;
        }
        
        .logs {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            height: 200px;
            overflow-y: auto;
        }
        
        .footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>
            <span class="logo">üõ°Ô∏è</span>
            pfSense Router Dashboard - Week 3 Network Segmentation
        </h1>
    </div>
    
    <div class="container">
        <div class="dashboard-grid">
            <!-- System Status -->
            <div class="card">
                <h2>üñ•Ô∏è System Status</h2>
                <div class="status-item">
                    <span>Router Status:</span>
                    <span class="status-value status-online">ONLINE</span>
                </div>
                <div class="status-item">
                    <span>Firewall:</span>
                    <span class="status-value status-online">ACTIVE</span>
                </div>
                <div class="status-item">
                    <span>NAT Rules:</span>
                    <span class="status-value status-online">ENABLED</span>
                </div>
                <div class="status-item">
                    <span>IP Forwarding:</span>
                    <span class="status-value status-online">ENABLED</span>
                </div>
                <div class="status-item">
                    <span>Uptime:</span>
                    <span class="status-value" id="uptime">Loading...</span>
                </div>
            </div>
            
            <!-- Network Segments -->
            <div class="card">
                <h2>üåê Network Segments</h2>
                <div class="network-segment">
                    <h3>DMZ Network</h3>
                    <p><strong>Subnet:</strong> 172.20.1.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.1.1</p>
                    <p><strong>Services:</strong> Webserver (Apache2 + ModSecurity)</p>
                </div>
                <div class="network-segment">
                    <h3>Internal Network</h3>
                    <p><strong>Subnet:</strong> 172.20.2.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.2.1</p>
                    <p><strong>Services:</strong> Database (MySQL)</p>
                </div>
                <div class="network-segment">
                    <h3>Office Network</h3>
                    <p><strong>Subnet:</strong> 172.20.3.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.3.1</p>
                    <p><strong>Services:</strong> Office Suite (LibreOffice)</p>
                </div>
            </div>
            
            <!-- Port Forwarding -->
            <div class="card">
                <h2>üîÑ Port Forwarding Rules</h2>
                <div class="status-item">
                    <span>HTTP (80):</span>
                    <span class="status-value">‚Üí 172.20.1.10:80</span>
                </div>
                <div class="status-item">
                    <span>HTTPS (443):</span>
                    <span class="status-value">‚Üí 172.20.1.10:443</span>
                </div>
                <div class="status-item">
                    <span>SSH Web (2222):</span>
                    <span class="status-value">‚Üí 172.20.1.10:22</span>
                </div>
                <div class="status-item">
                    <span>SSH DB (2223):</span>
                    <span class="status-value">‚Üí 172.20.2.10:22</span>
                </div>
                <div class="status-item">
                    <span>SSH Office (2224):</span>
                    <span class="status-value">‚Üí 172.20.3.10:22</span>
                </div>
                <div class="status-item">
                    <span>MySQL (3306):</span>
                    <span class="status-value">‚Üí 172.20.2.10:3306</span>
                </div>
            </div>
            
            <!-- Firewall Rules -->
            <div class="card">
                <h2>üõ°Ô∏è Active Firewall Rules</h2>
                <div class="status-item">
                    <span>DMZ ‚Üí Internal:</span>
                    <span class="status-value status-online">ALLOW (MySQL 3306)</span>
                </div>
                <div class="status-item">
                    <span>Office ‚Üí DMZ:</span>
                    <span class="status-value status-online">ALLOW (HTTP/HTTPS)</span>
                </div>
                <div class="status-item">
                    <span>Office ‚Üí Internal:</span>
                    <span class="status-value status-online">ALLOW (MySQL 3306)</span>
                </div>
                <div class="status-item">
                    <span>SSH Access:</span>
                    <span class="status-value status-online">ALLOW (All Networks)</span>
                </div>
                <div class="status-item">
                    <span>Default Policy:</span>
                    <span class="status-value">DENY ALL</span>
                </div>
            </div>
        </div>
        
        <!-- Controls -->
        <div class="card">
            <h2>‚öôÔ∏è Router Controls</h2>
            <button class="btn" onclick="reloadFirewall()">üîÑ Reload Firewall Rules</button>
            <button class="btn" onclick="showLogs()">üìã View Logs</button>
            <button class="btn btn-secondary" onclick="restartServices()">üîå Restart Services</button>
            <button class="btn btn-secondary" onclick="showNetworkStatus()">üìä Network Status</button>
        </div>
        
        <!-- System Logs -->
        <div class="card">
            <h2>üìã System Logs</h2>
            <div class="logs" id="systemLogs">
                [INFO] Router started successfully<br>
                [INFO] Firewall rules loaded<br>
                [INFO] Network segmentation active<br>
                [INFO] DMZ Network: 172.20.1.0/24 - Gateway: 172.20.1.1<br>
                [INFO] Internal Network: 172.20.2.0/24 - Gateway: 172.20.2.1<br>
                [INFO] Office Network: 172.20.3.0/24 - Gateway: 172.20.3.1<br>
                [INFO] Port forwarding rules applied<br>
                [INFO] Router web interface ready on port 8080<br>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>pfSense Router Dashboard - Week 3 Network Segmentation Project</p>
        <p>üõ°Ô∏è Secure ‚Ä¢ üåê Segmented ‚Ä¢ üîÑ Managed</p>
    </div>
    
    <script>
        // Update uptime display
        function updateUptime() {
            const start = new Date();
            setInterval(() => {
                const now = new Date();
                const diff = Math.floor((now - start) / 1000);
                const hours = Math.floor(diff / 3600);
                const minutes = Math.floor((diff % 3600) / 60);
                const seconds = diff % 60;
                document.getElementById('uptime').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // Control functions
        function reloadFirewall() {
            addLog('[INFO] Reloading firewall rules...');
            setTimeout(() => addLog('[INFO] Firewall rules reloaded successfully'), 1000);
        }
        
        function showLogs() {
            addLog('[INFO] Displaying system logs');
        }
        
        function restartServices() {
            addLog('[WARNING] Restarting router services...');
            setTimeout(() => addLog('[INFO] Router services restarted successfully'), 2000);
        }
        
        function showNetworkStatus() {
            addLog('[INFO] Network Status:');
            addLog('[INFO] DMZ: 172.20.1.10 (webserver-vm) - ONLINE');
            addLog('[INFO] Internal: 172.20.2.10 (database-vm) - ONLINE');
            addLog('[INFO] Office: 172.20.3.10 (office-vm) - ONLINE');
        }
        
        function addLog(message) {
            const logs = document.getElementById('systemLogs');
            const timestamp = new Date().toLocaleTimeString();
            logs.innerHTML += `[${timestamp}] ${message}<br>`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        // Initialize
        updateUptime();
        
        // Simulate some activity
        setInterval(() => {
            const activities = [
                '[INFO] Heartbeat check - All networks operational',
                '[INFO] Traffic allowed: Office ‚Üí Webserver',
                '[INFO] Traffic allowed: Webserver ‚Üí Database', 
                '[INFO] SSH connection established to office-vm',
                '[INFO] HTTP request forwarded to webserver-vm'
            ];
            addLog(activities[Math.floor(Math.random() * activities.length)]);
        }, 10000);
    </script>
</body>
</html>
