<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux iptables Router - Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            color: #333;
        }

        .header {
            background: #1a73e8;
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .header .logo {
            background: white;
            color: #1a73e8;
            padding: 0.5rem;
            border-radius: 4px;
            margin-right: 1rem;
            font-weight: bold;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            color: #1a73e8;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-value {
            font-weight: bold;
        }

        .status-online {
            color: #28a745;
        }

        .status-offline {
            color: #dc3545;
        }

        .network-segment {
            background: #f8f9fa;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 4px;
            border-left: 4px solid #1a73e8;
        }

        .network-segment h3 {
            color: #1a73e8;
            margin-bottom: 0.5rem;
        }

        .btn {
            background: #1a73e8;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        .btn:hover {
            background: #1557b7;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .logs {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            height: 200px;
            overflow-y: auto;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            margin-top: 2rem;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>
            <span class="logo">ÔøΩ</span>
            Linux iptables Router Dashboard - Network Segmentation
        </h1>
    </div>

    <div class="container">
        <div class="dashboard-grid">
            <!-- System Status -->
            <div class="card">
                <h2>ÔøΩ Linux System Status</h2>
                <div class="status-item">
                    <span>Router Status:</span>
                    <span class="status-value status-online">ONLINE</span>
                </div>
                <div class="status-item">
                    <span>iptables Firewall:</span>
                    <span class="status-value status-offline">DISABLED</span>
                </div>
                <div class="status-item">
                    <span>NAT/MASQUERADE:</span>
                    <span class="status-value status-online">ENABLED</span>
                </div>
                <div class="status-item">
                    <span>IP Forwarding:</span>
                    <span class="status-value status-online">ENABLED</span>
                </div>
                <div class="status-item">
                    <span>Security Level:</span>
                    <span class="status-value status-offline">NONE - ALL ALLOWED</span>
                </div>
                <div class="status-item">
                    <span>Uptime:</span>
                    <span class="status-value" id="uptime">Loading...</span>
                </div>
            </div>

            <!-- Network Segments -->
            <div class="card">
                <h2>üåê Network Segments</h2>
                <div class="network-segment">
                    <h3>DMZ Network</h3>
                    <p><strong>Subnet:</strong> 172.20.1.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.1.1</p>
                    <p><strong>Services:</strong> Webserver (Apache2 + ModSecurity)</p>
                </div>
                <div class="network-segment">
                    <h3>Internal Network</h3>
                    <p><strong>Subnet:</strong> 172.20.2.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.2.1</p>
                    <p><strong>Services:</strong> Database (MySQL)</p>
                </div>
                <div class="network-segment">
                    <h3>Office Network</h3>
                    <p><strong>Subnet:</strong> 172.20.3.0/24</p>
                    <p><strong>Gateway:</strong> 172.20.3.1</p>
                    <p><strong>Services:</strong> Office Suite (LibreOffice)</p>
                </div>
            </div>

            <!-- Port Forwarding -->
            <div class="card">
                <h2>üîÑ Port Forwarding Rules</h2>
                <div class="status-item">
                    <span>HTTP (80):</span>
                    <span class="status-value">‚Üí 172.20.1.10:80</span>
                </div>
                <div class="status-item">
                    <span>HTTPS (443):</span>
                    <span class="status-value">‚Üí 172.20.1.10:443</span>
                </div>
                <div class="status-item">
                    <span>SSH Web (2222):</span>
                    <span class="status-value">‚Üí 172.20.1.10:22</span>
                </div>
                <div class="status-item">
                    <span>SSH DB (2223):</span>
                    <span class="status-value">‚Üí 172.20.2.10:22</span>
                </div>
                <div class="status-item">
                    <span>SSH Office (2224):</span>
                    <span class="status-value">‚Üí 172.20.3.10:22</span>
                </div>
                <div class="status-item">
                    <span>MySQL (3306):</span>
                    <span class="status-value">‚Üí 172.20.2.10:3306</span>
                </div>
            </div>

            <!-- iptables Rules -->
            <div class="card">
                <h2>ÔøΩ iptables Status - FIREWALL DISABLED</h2>
                <div class="status-item">
                    <span>All Network Traffic:</span>
                    <span class="status-value status-online">ALLOWED</span>
                </div>
                <div class="status-item">
                    <span>DMZ ‚Üî Internal:</span>
                    <span class="status-value status-online">UNRESTRICTED</span>
                </div>
                <div class="status-item">
                    <span>Office ‚Üî All:</span>
                    <span class="status-value status-online">UNRESTRICTED</span>
                </div>
                <div class="status-item">
                    <span>Security Rules:</span>
                    <span class="status-value status-offline">DISABLED</span>
                </div>
                <div class="status-item">
                    <span>Network Segmentation:</span>
                    <span class="status-value status-offline">DISABLED</span>
                </div>
                <div class="status-item">
                    <span>Default Policy:</span>
                    <span class="status-value">ACCEPT ALL</span>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="card">
            <h2>‚öôÔ∏è iptables Router Controls</h2>
            <button class="btn" onclick="reloadFirewall()">üîÑ Reload iptables Rules</button>
            <button class="btn" onclick="showLogs()">üìã View iptables Logs</button>
            <button class="btn" onclick="showConntrack()">üìä Connection Tracking</button>
            <button class="btn btn-secondary" onclick="restartServices()">üîå Restart Services</button>
            <button class="btn btn-secondary" onclick="showNetworkStatus()">üìä Network Status</button>
        </div>

        <!-- System Logs -->
        <div class="card">
            <h2>üìã System Logs</h2>
            <div class="logs" id="systemLogs">
                [WARNING] Linux iptables Router started in OPEN mode<br>
                [WARNING] iptables firewall rules DISABLED - All traffic allowed<br>
                [WARNING] Network segmentation DISABLED<br>
                [INFO] DMZ Network: 172.20.1.0/24 - Gateway: 172.20.1.1 (No restrictions)<br>
                [INFO] Internal Network: 172.20.2.0/24 - Gateway: 172.20.2.1 (No restrictions)<br>
                [INFO] Office Network: 172.20.3.0/24 - Gateway: 172.20.3.1 (No restrictions)<br>
                [INFO] DNAT/SNAT rules applied for port forwarding<br>
                [WARNING] Security features disabled - No protection active<br>
                [INFO] Router web interface ready on port 80<br>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Linux iptables Router Dashboard - Network Segmentation Project</p>
        <p>ÔøΩ Linux ‚Ä¢ ÔøΩüõ°Ô∏è iptables ‚Ä¢ üåê Segmented ‚Ä¢ üîÑ Managed</p>
    </div>

    <script>
        // Update uptime display
        function updateUptime() {
            const start = new Date();
            setInterval(() => {
                const now = new Date();
                const diff = Math.floor((now - start) / 1000);
                const hours = Math.floor(diff / 3600);
                const minutes = Math.floor((diff % 3600) / 60);
                const seconds = diff % 60;
                document.getElementById('uptime').textContent =
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Control functions
        function reloadFirewall() {
            addLog('[WARNING] Firewall reload requested');
            addLog('[INFO] Flushing existing rules...');
            setTimeout(() => addLog('[WARNING] No firewall rules loaded - All traffic allowed'), 500);
            setTimeout(() => addLog('[WARNING] Router running in OPEN mode'), 1000);
        }

        function showLogs() {
            addLog('[INFO] Displaying iptables system logs');
            addLog('[INFO] Recent blocked connections logged to /var/log/messages');
        }

        function showConntrack() {
            addLog('[INFO] Connection Tracking Status:');
            addLog('[INFO] Active connections: 127');
            addLog('[INFO] Connection tracking table size: 65536');
            addLog('[INFO] Established: 89, New: 23, Related: 15');
        }

        function restartServices() {
            addLog('[WARNING] Restarting Linux router services...');
            setTimeout(() => addLog('[INFO] iptables service restarted'), 1000);
            setTimeout(() => addLog('[INFO] Router services restarted successfully'), 2000);
        }

        function showNetworkStatus() {
            addLog('[INFO] Network Status:');
            addLog('[INFO] DMZ: 172.20.1.10 (webserver-vm) - ONLINE (No restrictions)');
            addLog('[INFO] Internal: 172.20.2.10 (database-vm) - ONLINE (No restrictions)');
            addLog('[INFO] Office: 172.20.3.10 (office-vm) - ONLINE (No restrictions)');
            addLog('[WARNING] iptables rules: 0 security rules, NAT only');
            addLog('[WARNING] All inter-network communication allowed');
        }

        function addLog(message) {
            const logs = document.getElementById('systemLogs');
            const timestamp = new Date().toLocaleTimeString();
            logs.innerHTML += `[${timestamp}] ${message}<br>`;
            logs.scrollTop = logs.scrollHeight;
        }

        // Initialize
        updateUptime();

        // Simulate some activity
        setInterval(() => {
            const activities = [
                '[INFO] Heartbeat check - All networks operational',
                '[WARNING] Unrestricted: Office ‚Üí Webserver traffic flowing',
                '[WARNING] Unrestricted: Webserver ‚Üí Database direct access',
                '[WARNING] No security: SSH connections unfiltered',
                '[INFO] DNAT: HTTP request forwarded to webserver-vm',
                '[WARNING] No firewall protection active',
                '[WARNING] All network segments accessible to each other'
            ];
            addLog(activities[Math.floor(Math.random() * activities.length)]);
        }, 10000);
    </script>
</body>

</html>